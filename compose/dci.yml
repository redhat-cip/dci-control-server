db:
    build: ..
    dockerfile: compose/Dockerfile-DB
    ports:
        - "5432:5432"
es:
    build: ..
    dockerfile: compose/Dockerfile-ES
    ports:
        - "9200:9200"
        - "9300:9300"
api:
    build: ..
    dockerfile: compose/Dockerfile-API
    volumes:
        - ..:/opt/dci-control-server
    links:
        - db
        - es
    ports:
        - "5000:5000"
    command: /bin/bash
    stdin_open: true
    tty: true
tox:
    build: ..
    dockerfile: compose/Dockerfile-TOX
    volumes:
        - ..:/opt/dci/
    links:
        - db
        - es
    command: /bin/bash
    stdin_open: true
    tty: true
app:
    build: ..
    dockerfile: compose/Dockerfile-APP
    ports:
        - "8000:8000"
        - "35729:35729"
    volumes:
        - ../dci/dci_databrowser:/opt/dci_databrowser
        - /tmp/.X11-unix:/tmp/.X11-unix
    links:
        - api
    environment:
        - DISPLAY
    command: /bin/bash
    stdin_open: true
    tty: true
